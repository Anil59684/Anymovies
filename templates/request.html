{% extends "base.html" %}
{% block content %}
<h1>Request a Movie</h1>
<form id="reqForm">
  <input id="reqTitle" class="input" placeholder="Movie title" /><br><br>
  <textarea id="reqNotes" class="input" placeholder="Notes"></textarea><br>
  <button type="button" onclick="submitReq()" class="btn">Submit Request</button>
</form>

<script>
  async function submitReq(){
    const title = document.getElementById('reqTitle').value;
    const notes = document.getElementById('reqNotes').value;
    if(!title.trim()) return alert('Enter title');
    await fetch('/api/request', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ title, notes })
    });
    alert('Request submitted');
    document.getElementById('reqTitle').value='';
    document.getElementById('reqNotes').value='';
  }
</script>
{% endblock %}